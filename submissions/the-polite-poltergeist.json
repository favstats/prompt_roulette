{
  "title": "The Polite Poltergeist",
  "author": "favstats",
  "theme": "You're a poltergeist who's too polite to haunt",
  "genre": "First-Person Shooter",
  "twist": "Button mashing required",
  "difficulty": "normal",
  "description": "You are a polite ghost, haunting by building up your courage.aYou're Percy, a poltergeist taking your final haunting exam‚Äîbut you're too polite! Your scares keep turning into nice gestures like serving tea and complimenting d√©cor. Frantically mash SPACEBAR to overcome your politeness and keep your Scare Meter high, then click on wandering humans to haunt them. If your meter is too low, you'll make them cozy instead of scared! Successfully scare 10 humans in 90 seconds to earn your Haunting License.",
  "submitted": "2025-12-14",
  "html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>The Polite Poltergeist - Haunting Exam</title>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js\"></script>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        body {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            background: linear-gradient(135deg, #1a0a2e 0%, #2d1b4e 50%, #1a0a2e 100%);\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            overflow: hidden;\n        }\n        #game-container {\n            position: relative;\n            border-radius: 12px;\n            box-shadow: 0 0 60px rgba(138, 43, 226, 0.4), inset 0 0 30px rgba(0,0,0,0.3);\n        }\n        canvas {\n            display: block;\n            border-radius: 12px;\n        }\n        #overlay {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(10, 5, 20, 0.95);\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            color: white;\n            border-radius: 12px;\n            z-index: 100;\n            padding: 20px 25px;\n            text-align: center;\n            overflow: hidden;\n        }\n        #overlay.hidden {\n            display: none;\n        }\n        .header-row {\n            display: flex;\n            align-items: center;\n            gap: 15px;\n            margin-bottom: 8px;\n        }\n        .header-row .result-icon {\n            font-size: 2.5em;\n            margin: 0;\n            animation: ghostFloat 2s ease-in-out infinite;\n        }\n        #overlay h1 {\n            font-size: 2.2em;\n            margin: 0;\n            text-shadow: 0 0 20px #9b59b6, 0 0 40px #8e44ad;\n        }\n        @keyframes ghostFloat {\n            0%, 100% { transform: translateY(0); }\n            50% { transform: translateY(-8px); }\n        }\n        #overlay h2 {\n            font-size: 1.1em;\n            color: #bb8fce;\n            margin-bottom: 15px;\n            font-style: italic;\n        }\n        .instructions-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 12px;\n            width: 100%;\n            max-width: 850px;\n        }\n        .instructions {\n            background: rgba(155, 89, 182, 0.2);\n            border: 2px solid #9b59b6;\n            border-radius: 10px;\n            padding: 12px 16px;\n            text-align: left;\n        }\n        .instructions.full-width {\n            grid-column: 1 / -1;\n            text-align: center;\n        }\n        .instructions h3 {\n            color: #e8daef;\n            margin-bottom: 8px;\n            font-size: 1.05em;\n        }\n        .instructions p {\n            margin: 5px 0;\n            line-height: 1.4;\n            color: #d7bde2;\n            font-size: 0.95em;\n        }\n        .key {\n            display: inline-block;\n            background: linear-gradient(180deg, #9b59b6 0%, #7d3c98 100%);\n            padding: 3px 10px;\n            border-radius: 5px;\n            font-weight: bold;\n            margin: 0 2px;\n            box-shadow: 0 2px 0 #5b2c6f;\n            font-size: 0.9em;\n        }\n        .mash {\n            color: #f39c12;\n            font-weight: bold;\n            animation: pulse 0.5s ease-in-out infinite;\n        }\n        @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.6; }\n        }\n        #start-btn, #restart-btn, #help-btn {\n            background: linear-gradient(180deg, #27ae60 0%, #1e8449 100%);\n            color: white;\n            border: none;\n            padding: 12px 40px;\n            font-size: 1.2em;\n            border-radius: 30px;\n            cursor: pointer;\n            margin-top: 15px;\n            box-shadow: 0 4px 0 #145a32, 0 0 20px rgba(39, 174, 96, 0.3);\n            transition: all 0.1s;\n            font-weight: bold;\n        }\n        #start-btn:hover, #restart-btn:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 7px 0 #145a32, 0 0 30px rgba(39, 174, 96, 0.5);\n        }\n        #start-btn:active, #restart-btn:active {\n            transform: translateY(3px);\n            box-shadow: 0 2px 0 #145a32;\n        }\n        #help-btn {\n            background: linear-gradient(180deg, #9b59b6 0%, #7d3c98 100%);\n            box-shadow: 0 5px 0 #5b2c6f, 0 0 20px rgba(155, 89, 182, 0.3);\n            padding: 10px 30px;\n            font-size: 1em;\n            position: absolute;\n            top: 15px;\n            right: 15px;\n            z-index: 50;\n        }\n        #help-btn:hover {\n            box-shadow: 0 7px 0 #5b2c6f, 0 0 30px rgba(155, 89, 182, 0.5);\n        }\n        .result-icon {\n            font-size: 3.5em;\n            margin-bottom: 5px;\n        }\n        .win { color: #2ecc71; }\n        .lose { color: #e74c3c; }\n        .score-display {\n            font-size: 1.3em;\n            margin: 12px 0;\n            color: #f1c40f;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"game-container\">\n        <div id=\"overlay\">\n            <div class=\"header-row\">\n                <div class=\"result-icon\">üëª</div>\n                <h1>THE POLITE POLTERGEIST</h1>\n            </div>\n            <h2>~ Haunting Exam: Final Test ~</h2>\n            <div class=\"instructions-grid\">\n                <div class=\"instructions\">\n                    <h3>üìú Your Predicament</h3>\n                    <p>You're <strong>Percy</strong>, a poltergeist taking your final haunting exam.</p>\n                    <p>Problem: You're <em>too polite!</em> Your scares keep turning into nice gestures!</p>\n                </div>\n                <div class=\"instructions\">\n                    <h3>üéØ Win Condition</h3>\n                    <p>Successfully scare <strong>10 humans</strong> in <strong>90 seconds</strong> to pass!</p>\n                    <p>Low scare meter = polite action (makes humans cozy & harder to scare!)</p>\n                </div>\n                <div class=\"instructions full-width\">\n                    <h3>üéÆ How to Play</h3>\n                    <p><span class=\"key\">MOUSE</span> aim your ghostly crosshair &nbsp;‚Ä¢&nbsp; <span class=\"key\">CLICK</span> on humans to attempt a haunt &nbsp;‚Ä¢&nbsp; <span class=\"key mash\">MASH SPACEBAR</span> to overcome your politeness!</p>\n                    <p>Keep your <strong>SCARE METER</strong> high or you'll serve tea instead! ‚òï</p>\n                </div>\n            </div>\n            <button id=\"start-btn\">üëª BEGIN EXAM</button>\n        </div>\n        <button id=\"help-btn\" class=\"hidden\">‚ùì How to Play</button>\n    </div>\n\n    <script>\n        // Game constants\n        const GAME_WIDTH = 900;\n        const GAME_HEIGHT = 650;\n        const EXAM_GOAL = 10;\n        const GAME_TIME = 90;\n        const SCARE_DECAY = 0.8;\n        const SCARE_BOOST = 8;\n        const SCARE_THRESHOLD = 40;\n\n        // Game state\n        let gameState = 'menu'; // menu, playing, win, lose\n        let scareMeter = 50;\n        let scareCount = 0;\n        let timeLeft = GAME_TIME;\n        let humans = [];\n        let particles = [];\n        let floatingTexts = [];\n        let lastMashTime = 0;\n        let mashCombo = 0;\n        let screenShake = 0;\n        let ghostMessages = [];\n\n        // Polite vs Scary messages\n        const SCARE_MESSAGES = [\"BOO!\", \"FEAR ME!\", \"SPOOKY!\", \"BEGONE!\", \"AAAARGH!\", \"üëªüíÄ\"];\n        const POLITE_MESSAGES = [\"Nice weather!\", \"Lovely home!\", \"Here's tea! ‚òï\", \"You look nice!\", \"Pardon me!\", \"So sorry! üéÄ\"];\n        const POLITE_ACTIONS = [\"serves tea\", \"compliments decor\", \"apologizes\", \"offers biscuits\", \"tidies up\", \"says please\"];\n\n        // Human class\n        class Human {\n            constructor() {\n                this.reset();\n                this.cozyLevel = 0; // How comfortable they are (harder to scare)\n                this.scared = false;\n                this.scareTimer = 0;\n                this.comfortTimer = 0;\n                this.expression = 'üòê';\n                this.bobOffset = random(TWO_PI);\n                this.hatType = floor(random(4));\n                this.shirtColor = color(random(100, 255), random(100, 255), random(100, 255));\n                this.size = random(0.9, 1.1);\n            }\n\n            reset() {\n                // Spawn from edges\n                let side = floor(random(4));\n                if (side === 0) { this.x = random(100, GAME_WIDTH - 100); this.y = -50; }\n                else if (side === 1) { this.x = random(100, GAME_WIDTH - 100); this.y = GAME_HEIGHT + 50; }\n                else if (side === 2) { this.x = -50; this.y = random(150, GAME_HEIGHT - 100); }\n                else { this.x = GAME_WIDTH + 50; this.y = random(150, GAME_HEIGHT - 100); }\n                \n                this.targetX = random(150, GAME_WIDTH - 150);\n                this.targetY = random(200, GAME_HEIGHT - 100);\n                this.speed = random(0.8, 1.5);\n                this.wanderTimer = random(60, 180);\n            }\n\n            update() {\n                // Move toward target\n                let dx = this.targetX - this.x;\n                let dy = this.targetY - this.y;\n                let dist = sqrt(dx * dx + dy * dy);\n                \n                if (dist > 5) {\n                    this.x += (dx / dist) * this.speed;\n                    this.y += (dy / dist) * this.speed;\n                }\n\n                // Wander to new target\n                this.wanderTimer--;\n                if (this.wanderTimer <= 0 || dist < 5) {\n                    this.targetX = random(150, GAME_WIDTH - 150);\n                    this.targetY = random(200, GAME_HEIGHT - 100);\n                    this.wanderTimer = random(90, 200);\n                }\n\n                // Update timers\n                if (this.scareTimer > 0) {\n                    this.scareTimer--;\n                    if (this.scareTimer === 0 && this.scared) {\n                        return true; // Remove this human\n                    }\n                }\n\n                if (this.comfortTimer > 0) {\n                    this.comfortTimer--;\n                    if (this.comfortTimer === 0) {\n                        this.expression = this.cozyLevel > 0 ? 'üòä' : 'üòê';\n                    }\n                }\n\n                return false;\n            }\n\n            draw() {\n                push();\n                translate(this.x, this.y);\n                let bob = sin(frameCount * 0.05 + this.bobOffset) * 3;\n                translate(0, bob);\n                scale(this.size);\n\n                // Shadow\n                fill(0, 0, 0, 50);\n                noStroke();\n                ellipse(0, 55, 50, 15);\n\n                // Body\n                fill(this.shirtColor);\n                stroke(0);\n                strokeWeight(2);\n                rect(-20, 10, 40, 45, 5);\n\n                // Head\n                fill(255, 220, 180);\n                ellipse(0, -5, 45, 50);\n\n                // Expression\n                textSize(25);\n                textAlign(CENTER, CENTER);\n                noStroke();\n                text(this.expression, 0, -5);\n\n                // Hat variations\n                fill(80, 60, 40);\n                stroke(0);\n                strokeWeight(2);\n                if (this.hatType === 0) {\n                    // Top hat\n                    rect(-15, -45, 30, 25, 3);\n                    rect(-22, -23, 44, 6, 2);\n                } else if (this.hatType === 1) {\n                    // Beanie\n                    fill(200, 50, 50);\n                    arc(0, -25, 40, 35, PI, 0, CHORD);\n                    fill(255);\n                    ellipse(0, -42, 10, 10);\n                } else if (this.hatType === 2) {\n                    // Cap\n                    fill(50, 50, 150);\n                    arc(0, -25, 45, 30, PI, 0, CHORD);\n                    fill(60, 60, 160);\n                    arc(15, -20, 35, 12, -0.3, PI * 0.5);\n                }\n                // hatType 3 = no hat\n\n                // Cozy indicator (tea cup if cozy)\n                if (this.cozyLevel > 0) {\n                    textSize(20);\n                    noStroke();\n                    text('‚òï', 35, 20);\n                    if (this.cozyLevel > 1) {\n                        text('üç™', 40, 0);\n                    }\n                }\n\n                pop();\n            }\n\n            contains(px, py) {\n                let d = dist(px, py, this.x, this.y);\n                return d < 40 * this.size;\n            }\n\n            scare(successful) {\n                if (successful) {\n                    if (this.cozyLevel > 0) {\n                        // Need extra scare for cozy humans\n                        this.cozyLevel--;\n                        this.expression = 'üò∞';\n                        this.comfortTimer = 60;\n                        return false; // Not fully scared yet\n                    }\n                    this.scared = true;\n                    this.expression = 'üò±';\n                    this.scareTimer = 45;\n                    return true;\n                } else {\n                    // Polite action - make them cozy\n                    this.cozyLevel = min(this.cozyLevel + 1, 2);\n                    this.expression = 'ü•∞';\n                    this.comfortTimer = 90;\n                    return false;\n                }\n            }\n        }\n\n        // Particle class\n        class Particle {\n            constructor(x, y, type) {\n                this.x = x;\n                this.y = y;\n                this.type = type;\n                this.vx = random(-3, 3);\n                this.vy = random(-5, -2);\n                this.life = 60;\n                this.maxLife = 60;\n                this.rotation = random(TWO_PI);\n                this.rotSpeed = random(-0.2, 0.2);\n                this.size = random(15, 30);\n            }\n\n            update() {\n                this.x += this.vx;\n                this.y += this.vy;\n                this.vy += 0.15;\n                this.vx *= 0.98;\n                this.rotation += this.rotSpeed;\n                this.life--;\n                return this.life <= 0;\n            }\n\n            draw() {\n                let alpha = (this.life / this.maxLife) * 255;\n                push();\n                translate(this.x, this.y);\n                rotate(this.rotation);\n                textSize(this.size);\n                textAlign(CENTER, CENTER);\n                \n                if (this.type === 'scare') {\n                    tint(255, alpha);\n                    text(random() > 0.5 ? 'üíÄ' : 'üëª', 0, 0);\n                } else {\n                    text(random() > 0.5 ? '‚òï' : 'üå∏', 0, 0);\n                }\n                pop();\n            }\n        }\n\n        // Floating text class\n        class FloatingText {\n            constructor(x, y, text, color, size = 24) {\n                this.x = x;\n                this.y = y;\n                this.text = text;\n                this.color = color;\n                this.size = size;\n                this.life = 60;\n                this.maxLife = 60;\n                this.vy = -2;\n            }\n\n            update() {\n                this.y += this.vy;\n                this.vy *= 0.95;\n                this.life--;\n                return this.life <= 0;\n            }\n\n            draw() {\n                let alpha = (this.life / this.maxLife) * 255;\n                push();\n                textSize(this.size);\n                textAlign(CENTER, CENTER);\n                fill(red(this.color), green(this.color), blue(this.color), alpha);\n                stroke(0, alpha);\n                strokeWeight(3);\n                text(this.text, this.x, this.y);\n                pop();\n            }\n        }\n\n        function setup() {\n            let canvas = createCanvas(GAME_WIDTH, GAME_HEIGHT);\n            canvas.parent('game-container');\n            textFont('Segoe UI Emoji, Segoe UI, sans-serif');\n            noCursor();\n\n            // Button handlers\n            document.getElementById('start-btn').addEventListener('click', startGame);\n            document.getElementById('help-btn').addEventListener('click', showHelp);\n        }\n\n        function startGame() {\n            gameState = 'playing';\n            scareMeter = 50;\n            scareCount = 0;\n            timeLeft = GAME_TIME;\n            humans = [];\n            particles = [];\n            floatingTexts = [];\n            ghostMessages = [];\n            mashCombo = 0;\n\n            // Spawn initial humans\n            for (let i = 0; i < 4; i++) {\n                humans.push(new Human());\n            }\n\n            document.getElementById('overlay').classList.add('hidden');\n            document.getElementById('help-btn').classList.remove('hidden');\n        }\n\n        function showHelp() {\n            document.getElementById('overlay').classList.remove('hidden');\n            document.getElementById('start-btn').textContent = 'üëª RESUME';\n            gameState = 'paused';\n        }\n\n        function showEndScreen(won) {\n            let overlay = document.getElementById('overlay');\n            overlay.classList.remove('hidden');\n            document.getElementById('help-btn').classList.add('hidden');\n            \n            if (won) {\n                overlay.innerHTML = `\n                    <div class=\"result-icon win\">üéì</div>\n                    <h1 style=\"color: #2ecc71;\">EXAM PASSED!</h1>\n                    <h2>You've earned your Haunting License!</h2>\n                    <div class=\"score-display\">\n                        üëª ${scareCount} successful scares!<br>\n                        ‚è±Ô∏è ${GAME_TIME - timeLeft}s remaining\n                    </div>\n                    <p style=\"color: #aaa; margin: 15px 0;\">The Ghost Council is impressed by your spookiness!</p>\n                    <button id=\"restart-btn\" onclick=\"location.reload()\">üëª HAUNT AGAIN</button>\n                `;\n            } else {\n                overlay.innerHTML = `\n                    <div class=\"result-icon lose\">üòÖ</div>\n                    <h1 style=\"color: #e74c3c;\">TOO POLITE!</h1>\n                    <h2>Exam Failed - You're Just Too Nice!</h2>\n                    <div class=\"score-display\">\n                        üëª ${scareCount}/${EXAM_GOAL} scares<br>\n                        ‚òï You served ${floor(random(5, 15))} cups of tea\n                    </div>\n                    <p style=\"color: #aaa; margin: 15px 0;\">The Ghost Council suggests anger management... in reverse.</p>\n                    <button id=\"restart-btn\" onclick=\"location.reload()\">üëª TRY AGAIN</button>\n                `;\n            }\n        }\n\n        function draw() {\n            if (gameState === 'menu' || gameState === 'paused') {\n                drawGame();\n                return;\n            }\n\n            if (gameState === 'playing') {\n                updateGame();\n            }\n            \n            drawGame();\n        }\n\n        function updateGame() {\n            // Timer\n            if (frameCount % 60 === 0) {\n                timeLeft--;\n                if (timeLeft <= 0) {\n                    gameState = 'lose';\n                    showEndScreen(false);\n                    return;\n                }\n            }\n\n            // Decay scare meter (your polite nature taking over!)\n            scareMeter = max(0, scareMeter - SCARE_DECAY * (1 - mashCombo * 0.1));\n            mashCombo = max(0, mashCombo - 0.02);\n\n            // Update screen shake\n            screenShake *= 0.9;\n\n            // Update humans\n            for (let i = humans.length - 1; i >= 0; i--) {\n                if (humans[i].update()) {\n                    humans.splice(i, 1);\n                    // Spawn new human\n                    setTimeout(() => {\n                        if (gameState === 'playing' && humans.length < 5) {\n                            humans.push(new Human());\n                        }\n                    }, 500);\n                }\n            }\n\n            // Ensure minimum humans\n            while (humans.length < 3 && gameState === 'playing') {\n                humans.push(new Human());\n            }\n\n            // Update particles\n            for (let i = particles.length - 1; i >= 0; i--) {\n                if (particles[i].update()) {\n                    particles.splice(i, 1);\n                }\n            }\n\n            // Update floating texts\n            for (let i = floatingTexts.length - 1; i >= 0; i--) {\n                if (floatingTexts[i].update()) {\n                    floatingTexts.splice(i, 1);\n                }\n            }\n\n            // Update ghost messages\n            for (let i = ghostMessages.length - 1; i >= 0; i--) {\n                ghostMessages[i].life--;\n                if (ghostMessages[i].life <= 0) {\n                    ghostMessages.splice(i, 1);\n                }\n            }\n        }\n\n        function drawGame() {\n            // Apply screen shake\n            push();\n            if (screenShake > 0.5) {\n                translate(random(-screenShake, screenShake), random(-screenShake, screenShake));\n            }\n\n            // Background - spooky living room\n            drawBackground();\n\n            // Draw humans\n            for (let h of humans) {\n                h.draw();\n            }\n\n            // Draw particles\n            for (let p of particles) {\n                p.draw();\n            }\n\n            // Draw floating texts\n            for (let ft of floatingTexts) {\n                ft.draw();\n            }\n\n            // Draw ghost messages (what Percy says)\n            for (let gm of ghostMessages) {\n                let alpha = (gm.life / gm.maxLife) * 255;\n                push();\n                textSize(28);\n                textAlign(CENTER, CENTER);\n                fill(gm.color[0], gm.color[1], gm.color[2], alpha);\n                stroke(0, alpha);\n                strokeWeight(4);\n                let wobble = sin(frameCount * 0.3) * 5;\n                text(gm.text, gm.x + wobble, gm.y);\n                pop();\n            }\n\n            pop();\n\n            // Draw UI\n            drawUI();\n\n            // Draw crosshair\n            drawCrosshair();\n        }\n\n        function drawBackground() {\n            // Gradient background\n            for (let y = 0; y < GAME_HEIGHT; y += 10) {\n                let inter = map(y, 0, GAME_HEIGHT, 0, 1);\n                let c = lerpColor(color(40, 20, 60), color(20, 10, 35), inter);\n                noStroke();\n                fill(c);\n                rect(0, y, GAME_WIDTH, 10);\n            }\n\n            // Floor\n            fill(60, 40, 30);\n            stroke(40, 25, 15);\n            strokeWeight(2);\n            rect(0, GAME_HEIGHT - 80, GAME_WIDTH, 80);\n\n            // Floorboard lines\n            stroke(50, 30, 20);\n            for (let x = 0; x < GAME_WIDTH; x += 80) {\n                line(x, GAME_HEIGHT - 80, x, GAME_HEIGHT);\n            }\n\n            // Wall decorations\n            // Spooky painting\n            fill(70, 50, 40);\n            stroke(100, 70, 50);\n            strokeWeight(4);\n            rect(100, 80, 120, 90, 3);\n            fill(30, 50, 60);\n            noStroke();\n            rect(108, 88, 104, 74);\n            // Ghost in painting\n            fill(200, 200, 220, 150);\n            ellipse(160, 120, 40, 50);\n            ellipse(145, 135, 15, 20);\n            ellipse(175, 135, 15, 20);\n            fill(20);\n            ellipse(150, 115, 8, 10);\n            ellipse(170, 115, 8, 10);\n            ellipse(160, 130, 10, 15);\n\n            // Bookshelf\n            fill(80, 50, 30);\n            stroke(60, 35, 20);\n            strokeWeight(2);\n            rect(GAME_WIDTH - 180, 60, 140, 180, 3);\n            // Shelves\n            fill(70, 45, 25);\n            for (let y = 100; y < 230; y += 45) {\n                rect(GAME_WIDTH - 175, y, 130, 8);\n            }\n            // Books\n            let bookColors = ['#c0392b', '#2980b9', '#27ae60', '#8e44ad', '#f39c12'];\n            for (let shelf = 0; shelf < 3; shelf++) {\n                let bx = GAME_WIDTH - 170;\n                for (let i = 0; i < 6; i++) {\n                    fill(bookColors[i % bookColors.length]);\n                    let bh = random(25, 38);\n                    rect(bx, 62 + shelf * 45 + (40 - bh), random(12, 20), bh, 1);\n                    bx += random(15, 22);\n                }\n            }\n\n            // Window\n            fill(20, 25, 50);\n            stroke(80, 60, 40);\n            strokeWeight(6);\n            rect(GAME_WIDTH / 2 - 80, 50, 160, 120, 5);\n            // Window panes\n            stroke(60, 45, 30);\n            strokeWeight(4);\n            line(GAME_WIDTH / 2, 50, GAME_WIDTH / 2, 170);\n            line(GAME_WIDTH / 2 - 80, 110, GAME_WIDTH / 2 + 80, 110);\n            // Moon\n            fill(240, 240, 200);\n            noStroke();\n            ellipse(GAME_WIDTH / 2 + 30, 90, 35, 35);\n            // Stars\n            fill(255, 255, 200);\n            for (let i = 0; i < 5; i++) {\n                ellipse(GAME_WIDTH / 2 - 60 + i * 30, 70 + (i % 2) * 20, 3, 3);\n            }\n\n            // Candles with flicker\n            for (let cx of [50, GAME_WIDTH - 50]) {\n                fill(200, 180, 150);\n                noStroke();\n                rect(cx - 8, 180, 16, 50, 2);\n                // Flame\n                fill(255, 200, 50, 200 + sin(frameCount * 0.2 + cx) * 55);\n                ellipse(cx, 175 + sin(frameCount * 0.15 + cx) * 3, 12, 20);\n                fill(255, 100, 50, 150);\n                ellipse(cx, 170 + sin(frameCount * 0.2 + cx) * 2, 6, 12);\n            }\n\n            // Cobwebs\n            stroke(150, 150, 150, 80);\n            strokeWeight(1);\n            noFill();\n            // Top left cobweb\n            for (let i = 0; i < 5; i++) {\n                let r = 30 + i * 15;\n                arc(0, 0, r, r, 0, HALF_PI);\n            }\n            // Top right cobweb\n            for (let i = 0; i < 5; i++) {\n                let r = 30 + i * 15;\n                arc(GAME_WIDTH, 0, r, r, HALF_PI, PI);\n            }\n        }\n\n        function drawUI() {\n            // Top bar background\n            fill(0, 0, 0, 180);\n            noStroke();\n            rect(0, 0, GAME_WIDTH, 65, 0, 0, 12, 12);\n\n            // Scare meter background\n            fill(40, 40, 40);\n            stroke(80, 80, 80);\n            strokeWeight(2);\n            rect(20, 15, 280, 35, 8);\n\n            // Scare meter fill\n            let meterColor;\n            if (scareMeter > SCARE_THRESHOLD) {\n                meterColor = lerpColor(color(200, 100, 50), color(180, 50, 220), (scareMeter - SCARE_THRESHOLD) / (100 - SCARE_THRESHOLD));\n            } else {\n                meterColor = lerpColor(color(100, 200, 100), color(200, 100, 50), scareMeter / SCARE_THRESHOLD);\n            }\n            fill(meterColor);\n            noStroke();\n            let meterWidth = map(scareMeter, 0, 100, 0, 270);\n            rect(25, 20, meterWidth, 25, 5);\n\n            // Meter glow when high\n            if (scareMeter > SCARE_THRESHOLD) {\n                fill(180, 50, 220, 50 + sin(frameCount * 0.2) * 30);\n                rect(25, 20, meterWidth, 25, 5);\n            }\n\n            // Scare meter label\n            fill(255);\n            noStroke();\n            textSize(14);\n            textAlign(LEFT, CENTER);\n            text(scareMeter > SCARE_THRESHOLD ? \"üëª SPOOKY!\" : \"‚òï TOO POLITE\", 30, 32);\n\n            // Threshold marker\n            stroke(255, 255, 255, 150);\n            strokeWeight(2);\n            let threshX = 25 + map(SCARE_THRESHOLD, 0, 100, 0, 270);\n            line(threshX, 18, threshX, 52);\n\n            // Mash indicator\n            if (mashCombo > 0.5) {\n                textSize(12);\n                fill(255, 200, 50);\n                noStroke();\n                textAlign(LEFT, CENTER);\n                text(\"‚ö° MASHING!\", 200, 32);\n            }\n\n            // Score / Progress\n            fill(255);\n            textSize(22);\n            textAlign(CENTER, CENTER);\n            text(`üëª ${scareCount} / ${EXAM_GOAL}`, GAME_WIDTH / 2, 32);\n\n            // Progress bar\n            fill(40, 40, 40);\n            stroke(80, 80, 80);\n            strokeWeight(2);\n            rect(GAME_WIDTH / 2 - 80, 48, 160, 10, 5);\n            fill(50, 200, 100);\n            noStroke();\n            let progWidth = map(scareCount, 0, EXAM_GOAL, 0, 156);\n            rect(GAME_WIDTH / 2 - 78, 50, progWidth, 6, 3);\n\n            // Timer\n            fill(timeLeft <= 15 ? color(255, 100, 100) : color(255));\n            textSize(24);\n            textAlign(RIGHT, CENTER);\n            let timeColor = timeLeft <= 15 ? 'üî¥' : '‚è±Ô∏è';\n            text(`${timeColor} ${timeLeft}s`, GAME_WIDTH - 25, 32);\n\n            // Instructions reminder (bottom)\n            fill(255, 255, 255, 150);\n            textSize(14);\n            textAlign(CENTER, BOTTOM);\n            text(\"MASH [SPACE] to stay spooky! | CLICK humans to haunt!\", GAME_WIDTH / 2, GAME_HEIGHT - 10);\n        }\n\n        function drawCrosshair() {\n            let cx = mouseX;\n            let cy = mouseY;\n\n            // Ghostly crosshair\n            push();\n            translate(cx, cy);\n\n            // Outer ring\n            noFill();\n            stroke(200, 150, 255, 150);\n            strokeWeight(2);\n            ellipse(0, 0, 50 + sin(frameCount * 0.1) * 5, 50 + sin(frameCount * 0.1) * 5);\n\n            // Inner elements based on scare meter\n            if (scareMeter > SCARE_THRESHOLD) {\n                // Spooky crosshair\n                stroke(180, 50, 220, 200);\n                strokeWeight(3);\n                line(-15, 0, -8, 0);\n                line(15, 0, 8, 0);\n                line(0, -15, 0, -8);\n                line(0, 15, 0, 8);\n\n                // Ghost icon\n                fill(180, 50, 220, 200);\n                noStroke();\n                textSize(20);\n                textAlign(CENTER, CENTER);\n                text('üëª', 0, 0);\n            } else {\n                // Polite crosshair (tea cup)\n                stroke(100, 200, 100, 200);\n                strokeWeight(2);\n                line(-12, 0, -6, 0);\n                line(12, 0, 6, 0);\n                line(0, -12, 0, -6);\n                line(0, 12, 0, 6);\n\n                fill(100, 200, 100, 200);\n                noStroke();\n                textSize(18);\n                textAlign(CENTER, CENTER);\n                text('‚òï', 0, 0);\n            }\n\n            pop();\n        }\n\n        function keyPressed() {\n            if (gameState === 'playing' && (key === ' ' || keyCode === 32)) {\n                // Mash detected!\n                scareMeter = min(100, scareMeter + SCARE_BOOST);\n                mashCombo = min(1, mashCombo + 0.15);\n                screenShake = max(screenShake, 2);\n\n                // Visual feedback\n                if (scareMeter > SCARE_THRESHOLD && random() > 0.7) {\n                    particles.push(new Particle(mouseX + random(-30, 30), mouseY + random(-30, 30), 'scare'));\n                }\n                return false; // Prevent scrolling\n            }\n\n            if (gameState === 'paused' && (key === ' ' || keyCode === 32)) {\n                gameState = 'playing';\n                document.getElementById('overlay').classList.add('hidden');\n                return false;\n            }\n        }\n\n        function mousePressed() {\n            if (gameState !== 'playing') return;\n\n            // Check if clicked on a human\n            for (let h of humans) {\n                if (h.contains(mouseX, mouseY) && !h.scared) {\n                    attemptHaunt(h);\n                    break;\n                }\n            }\n        }\n\n        function attemptHaunt(human) {\n            let successful = scareMeter >= SCARE_THRESHOLD;\n            let fullyScarred = human.scare(successful);\n\n            // Particles\n            for (let i = 0; i < 8; i++) {\n                particles.push(new Particle(human.x, human.y - 20, successful ? 'scare' : 'polite'));\n            }\n\n            if (successful) {\n                if (fullyScarred) {\n                    // Full scare!\n                    scareCount++;\n                    screenShake = 10;\n                    \n                    let msg = random(SCARE_MESSAGES);\n                    ghostMessages.push({\n                        x: human.x,\n                        y: human.y - 80,\n                        text: msg,\n                        color: [180, 50, 220],\n                        life: 60,\n                        maxLife: 60\n                    });\n\n                    floatingTexts.push(new FloatingText(human.x, human.y - 50, \"+1 SCARE!\", color(50, 220, 100), 28));\n\n                    // Check win condition\n                    if (scareCount >= EXAM_GOAL) {\n                        gameState = 'win';\n                        showEndScreen(true);\n                    }\n                } else {\n                    // Breaking through cozy\n                    screenShake = 5;\n                    floatingTexts.push(new FloatingText(human.x, human.y - 50, \"GETTING THERE...\", color(255, 200, 50), 20));\n                    ghostMessages.push({\n                        x: human.x,\n                        y: human.y - 80,\n                        text: \"Boo..?\",\n                        color: [255, 200, 50],\n                        life: 45,\n                        maxLife: 45\n                    });\n                }\n            } else {\n                // Too polite!\n                screenShake = 3;\n                \n                let msg = random(POLITE_MESSAGES);\n                ghostMessages.push({\n                    x: human.x,\n                    y: human.y - 80,\n                    text: msg,\n                    color: [100, 200, 100],\n                    life: 60,\n                    maxLife: 60\n                });\n\n                let action = random(POLITE_ACTIONS);\n                floatingTexts.push(new FloatingText(human.x, human.y - 50, `*${action}*`, color(150, 220, 150), 18));\n            }\n\n            // Drain some meter on use\n            scareMeter = max(0, scareMeter - 15);\n        }\n\n        // Prevent spacebar scrolling\n        window.addEventListener('keydown', function(e) {\n            if (e.keyCode === 32 && e.target === document.body) {\n                e.preventDefault();\n            }\n        });\n    </script>\n</body>\n</html>"
}
